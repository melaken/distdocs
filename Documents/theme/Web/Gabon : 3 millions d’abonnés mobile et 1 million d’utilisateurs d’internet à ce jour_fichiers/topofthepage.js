(function(b){var a=function(g){var d=this;var i={busy:false};this.construct=function(k){b.extend(i,k);h()};var h=function(){var k=i.linklocation.split("_");var m=b('<span id="plg_system_topofthepage" aria-label="'+Joomla.JText._("PLG_SYS_TOPOFTHEPAGE_ARIA_LABEL")+'"></span>').appendTo(document.body);if(!parseInt(i.omittext)){b('<span class="buttontext">'+Joomla.JText._("PLG_SYS_TOPOFTHEPAGE_GOTOTOP")+"</span>").appendTo(m)}var l={position:"fixed",opacity:0,filter:"alpha(opacity=0)"};switch(k[0]){case"top":l.top="0px";break;default:l.bottom="0px";break}switch(k[1]){case"left":l.left="0px";break;case"center":l.left=((b(window).width()/2)-(b(m).width()/2))+"px";break;default:l.right="0px";break}if(parseInt(i.zIndex)){l["z-index"]=f(document.body)+1}b(m).css(l);var n=j(m);c(m,n);e(m);if(parseInt(i.topalways)){b("body,html").scrollTop(0)}};var j=function(n){var l=(i.pro?parseInt(i.visibleopacity):100)/100;l=(l>1||l<0)?1:l;var k={opacity:l};var m={opacity:0,display:"block"};b(n).css(m);return{show:k,hide:m}};var c=function(k,l){b(window).scroll(function(){var m={queue:false,duration:parseInt(i.displaydur),easing:"linear"};if(!i.busy){if(b(this).scrollTop()>=parseInt(i.spyposition)){if(parseInt(b(k).css("opacity"))===0){i.busy=true;b(k).animate(l.show,m);i.busy=false}}else{if(b(k).css("opacity")!==0){i.busy=true;b(k).animate(l.hide,m);i.busy=false}}}});b(window).scroll()};var e=function(k){b(k).click(function(m){var l=parseInt(i.smoothscrollduration);var n=i.smoothscrolltransition;if(l!==0){b("body,html").animate({scrollTop:0},l,n)}else{b("body,html").scrollTop(0)}return false})};var f=function(q,n){n=n||Infinity;q=q||document.body;var r,s,p=1,m=[],o=0;var l=q.childNodes,k=l.length;while(o<k){r=l[o++];gototop;if(r.nodeType!==1){continue}if(deepCss(r,"position")!=="static"){s=deepCss(r,"z-index");if(s==="auto"){s=f(r)}else{s=parseInt(s,10)||0}}else{s=f(r)}if(s>p&&s<=n){p=s}}return p};this.construct(g)};b(document).ready(function(){new a(window.plg_system_topofthepage_options)})})(jQuery);