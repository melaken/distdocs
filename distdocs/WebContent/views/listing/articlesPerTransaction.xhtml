<!DOCTYPE html>
<html lang="fr"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">
	<h:head>
		<title>Articles</title>
		<h:outputStylesheet name="components.css" library="primefaces"/>
		<h:outputStylesheet name="galleria/galleria.css" library="primefaces"/>
		<h:outputStylesheet name="primeicons/primeicons.css" library="primefaces"/>
		<h:outputStylesheet library="default" name="css/style.css" />
		<h:outputStylesheet library="default" name="css/form.css" />
	</h:head>
	<style>
		body{
			background-color:#e0e0e0;
		}
		
	</style>
	<h:body>
		<h:form>  
    <p:growl id="messages"/>
 	
 	<p:toolbar id="tb" style="height:80px;font-size:13px;background-color:#0060a0;margin-right:0px;margin-left:0px;">
        <f:facet name="left">
        </f:facet>
        <f:facet name="right" style="margin-right:20px;">
		<p:linkButton outcome="#{constanteBean.accueil}" value="Accueil" icon="pi pi-home" rendered="#{sessionScope['user'] != null}" style="margin-top:50px"/>
        <p:menuButton value="#{sessionScope['user'].nom}" style="font-size:13px;margin-right:20px;margin-top:20px;padding:5px"
        	icon="pi pi-user" rendered="#{sessionScope['user'] != null}">
        		<p:menuitem value="Publier" outcome="#{constanteBean.upload}" icon="pi pi-upload"
     				style="padding-left:10px" rendered="#{sessionScope['user'].userType == 'EDITEUR'}"/> 
    			<p:menuitem value="Ma bibliothèque" outcome="#{constanteBean.biblio}" 
    			icon="pi pi-file" style="padding-left:10px"/> 
     			<p:menuitem value="Mes transactions"  icon="pi pi-money-bill" style="padding-left:10px"/>
     			<p:menuitem value="Paramètres"  icon="pi pi-cog" style="padding-left:10px"/>
     			<p:separator /> 
     			<p:menuitem value="Déconnexion" action="#{connexionBean.logout}" type="button" icon="pi pi-sign-out" style="padding-left:10px;"
     			rendered="#{sessionScope['user'] != null}" update="@form"/> 
        </p:menuButton>
        </f:facet>
 
    </p:toolbar>
    <p:sticky target="tb" />
</h:form>
	   
	   <h:form id="formListe">
		    <p:dataGrid var="doc" value="#{transactionBean.userTransArt}" columns="5" emptyMessage="#{docsAchetesBean.emptyMessage}"
		        rows="12" paginator="true" style="cellspacing:0px;"
		        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		        rowsPerPageTemplate="6,12,16">
		            <h:panelGrid columns="1" style="width:200px;height:300px;">
			            <p:commandLink update=":form:image" oncomplete="PF('coverDialog').show()" >
							 <p:graphicImage  value="#{listeDocsBean.image}" style="height: 100px; width: 70px;border-radius: 2px" > 
		               		 	<f:param name="cover" value="#{doc.premiereCouverture}" />
		               		</p:graphicImage>	
		               		<f:setPropertyActionListener value="#{doc}" target="#{listeDocsBean.selectedDoc}" /> 
	               		</p:commandLink>
		            </h:panelGrid>
		    </p:dataGrid>
		    
		     <p:dialog  widgetVar="coverDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false"
		    	header="Aperçu">
        	<p:outputPanel id="image" style="text-align:justify;border:0">
	            <p:panelGrid  columns="1" rendered="#{not empty listeDocsBean.selectedDoc}" columnClasses="label,value">
	                 <p:graphicImage value="#{listeDocsBean.image}" style="height:600px; width:400px">
	                    	<f:param name="cover" value="#{listeDocsBean.selectedDoc.premiereCouverture}" />
	                    </p:graphicImage>
                </p:panelGrid>
            </p:outputPanel>
            </p:dialog>
		   </h:form>
	</h:body>
</html>